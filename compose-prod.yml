name: box-prod

services:
  web-server:
    build:
      context: .
      target: web-server-prodution
    extends:
      file: comum.yml
      service: web-server
    networks:
      - connection

  database: 
    build:
      context: .
      target: database
    extends:
      file: comum.yml
      service: database
    volumes:
      - db-data:/var/lib/postgresql
    networks:
      - connection

volumes:
  db-data:

networks:
  connection: